{% extends "base.html" %}

{% block title %}How to Mine - Trinity Pool{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <h1 class="mb-4">How to Mine Trinity</h1>
        
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="bi bi-1-circle"></i> Get Trinity Wallet</h4>
            </div>
            <div class="card-body">
                <p>First, you'll need a Trinity wallet to receive your mining rewards.</p>
                <ol>
                    <li>Download Trinity wallet from the official repository</li>
                    <li>Install and launch the wallet</li>
                    <li>Create a new wallet or open an existing one</li>
                    <li>Copy your receiving address - this will be your worker name</li>
                </ol>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="bi bi-2-circle"></i> Choose Mining Software</h4>
            </div>
            <div class="card-body">
                <h5>Recommended Mining Software</h5>
                <ul>
                    <li><strong>CPUMiner (CPU Mining)</strong> - For SHA256d algorithm</li>
                    <li><strong>CGMiner</strong> - For GPU mining</li>
                    <li><strong>BFGMiner</strong> - Alternative GPU/ASIC miner</li>
                </ul>
                
                <h5>Download Links</h5>
                <ul>
                    <li>CPUMiner: <code>sudo apt-get install cpuminer</code></li>
                    <li>CGMiner: <a href="https://github.com/ckolivas/cgminer" target="_blank">https://github.com/ckolivas/cgminer</a></li>
                </ul>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="bi bi-3-circle"></i> Configure Your Miner</h4>
            </div>
            <div class="card-body">
                <h5>Pool Connection Details</h5>
                <div class="alert alert-info">
                    <strong>Pool URL:</strong> <code>http://{{ pool_host }}:{{ stratum_port }}</code><br>
                    <strong>Your Address:</strong> Your Trinity wallet address<br>
                    <strong>Password:</strong> <code>x</code> (or anything)
                </div>

                <h5>Mining Commands</h5>
                
                <h6>CPUMiner (SHA256D):</h6>
                <pre class="bg-dark text-white p-3"><code>minerd -a sha256d -o http://{{ pool_host }}:{{ stratum_port }} -u YOUR_WALLET_ADDRESS -p x</code></pre>

                <h6>CGMiner:</h6>
                <pre class="bg-dark text-white p-3"><code>cgminer -o http://{{ pool_host }}:{{ stratum_port }} -u YOUR_WALLET_ADDRESS -p x --algo sha256d</code></pre>

                <div class="alert alert-warning">
                    <strong>Important:</strong> Replace <code>YOUR_WALLET_ADDRESS</code> with your actual Trinity wallet address. This address is your worker name and where your mining rewards will be sent.
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="bi bi-4-circle"></i> Monitor Your Mining</h4>
            </div>
            <div class="card-body">
                <p>Once you start mining, you can monitor your progress:</p>
                <ol>
                    <li>Use the search bar to find your wallet address</li>
                    <li>View your hashrate, shares, and earnings</li>
                    <li>Check your payment history</li>
                </ol>
                
                <form action="{{ url_for('search') }}" method="get" class="mt-3">
                    <div class="input-group">
                        <input type="text" class="form-control" name="q" placeholder="Enter your wallet address">
                        <button class="btn btn-primary" type="submit">Check Stats</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0"><i class="bi bi-cash-coin"></i> Payment Information</h4>
            </div>
            <div class="card-body">
                <h5>How Payments Work</h5>
                <ul>
                    <li><strong>Payment Method:</strong> Proportional (PROP)</li>
                    <li><strong>Payment Timing:</strong> Every block found by the pool</li>
                    <li><strong>Distribution:</strong> Based on your share contribution</li>
                    <li><strong>Pool Fee:</strong> 1% (used for server maintenance)</li>
                    <li><strong>Minimum Payout:</strong> 0.1 TRIN</li>
                </ul>
                
                <p>Your wallet address (worker name) automatically receives payments when:</p>
                <ol>
                    <li>The pool finds a block</li>
                    <li>Your pending balance reaches the minimum payout threshold</li>
                </ol>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-info text-white">
                <h4 class="mb-0"><i class="bi bi-question-circle"></i> Troubleshooting</h4>
            </div>
            <div class="card-body">
                <h5>Common Issues</h5>
                
                <h6>Miner won't connect:</h6>
                <ul>
                    <li>Check that the pool URL and port are correct</li>
                    <li>Ensure your firewall allows outbound connections</li>
                    <li>Verify your wallet address is valid</li>
                </ul>
                
                <h6>No shares showing:</h6>
                <ul>
                    <li>Make sure your miner is running</li>
                    <li>Wait a few minutes for shares to register</li>
                    <li>Check miner output for errors</li>
                </ul>
                
                <h6>No payments received:</h6>
                <ul>
                    <li>Check if your pending balance is above the minimum payout</li>
                    <li>Verify the pool has found blocks recently</li>
                    <li>Ensure your wallet address is correct</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <div class="card-body text-center">
                <h5>Need More Help?</h5>
                <p>If you have questions or need assistance, please contact the pool administrator.</p>
                <a href="{{ url_for('index') }}" class="btn btn-primary">Back to Pool Dashboard</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
